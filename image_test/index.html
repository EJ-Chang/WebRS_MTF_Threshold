<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>刺激圖片顯示測試 - 純HTML版</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>🔬 刺激圖片顯示測試</h1>
        <p>測試圖片是否因為Streamlit而被壓縮</p>
    </header>

    <div class="controls">
        <h3>顯示控制</h3>
        <label>
            渲染模式：
            <select id="renderMode" onchange="changeRenderMode()">
                <option value="auto">瀏覽器預設 (auto)</option>
                <option value="pixelated">像素完美 (pixelated)</option>
                <option value="crisp-edges">銳利邊緣 (crisp-edges)</option>
                <option value="smooth">平滑 (smooth)</option>
            </select>
        </label>
        
        <label>
            縮放比例：
            <select id="scaleMode" onchange="changeScaleMode()">
                <option value="original">原始尺寸 (100%)</option>
                <option value="fit-width">適應寬度</option>
                <option value="fit-height">適應高度</option>
                <option value="zoom-50">縮小 50%</option>
                <option value="zoom-200">放大 200%</option>
            </select>
        </label>
        
        <label>
            容器框線：
            <input type="checkbox" id="showBorder" onchange="toggleBorder()" checked>
            顯示容器邊界
        </label>
    </div>

    <div class="info-panel">
        <h3>系統信息</h3>
        <p id="systemInfo">正在檢測...</p>
        <p id="screenInfo">正在檢測螢幕信息...</p>
    </div>

    <div class="images-container">
        <div class="image-item">
            <h3>stimuli_img.png</h3>
            <div class="image-wrapper">
                <img src="images/stimuli_img.png" alt="刺激圖像" id="img-stimuli">
                <div class="image-info">
                    <span class="size-info" id="size-stimuli">載入中...</span>
                </div>
            </div>
        </div>

        <div class="image-item">
            <h3>text_img.png</h3>
            <div class="image-wrapper">
                <img src="images/text_img.png" alt="文字圖像" id="img-text">
                <div class="image-info">
                    <span class="size-info" id="size-text">載入中...</span>
                </div>
            </div>
        </div>

        <div class="image-item">
            <h3>tw_newsimg.png</h3>
            <div class="image-wrapper">
                <img src="images/tw_newsimg.png" alt="台灣新聞圖像" id="img-tw">
                <div class="image-info">
                    <span class="size-info" id="size-tw">載入中...</span>
                </div>
            </div>
        </div>

        <div class="image-item">
            <h3>us_newsimg.png</h3>
            <div class="image-wrapper">
                <img src="images/us_newsimg.png" alt="美國新聞圖像" id="img-us">
                <div class="image-info">
                    <span class="size-info" id="size-us">載入中...</span>
                </div>
            </div>
        </div>

        <div class="image-item">
            <h3>bilingual_news.png</h3>
            <div class="image-wrapper">
                <img src="images/bilingual_news.png" alt="雙語新聞圖像" id="img-bilingual">
                <div class="image-info">
                    <span class="size-info" id="size-bilingual">載入中...</span>
                </div>
            </div>
        </div>

        <div class="image-item">
            <h3>working.png</h3>
            <div class="image-wrapper">
                <img src="images/working.png" alt="工作圖像" id="img-working">
                <div class="image-info">
                    <span class="size-info" id="size-working">載入中...</span>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <h3>🔍 觀察指南</h3>
        <div class="observation-guide">
            <div class="guide-section">
                <h4>像素完美模式 (pixelated)</h4>
                <ul>
                    <li>圖片邊緣應該非常銳利</li>
                    <li>沒有抗鋸齒平滑效果</li>
                    <li>適合精確的科學實驗</li>
                </ul>
            </div>
            <div class="guide-section">
                <h4>瀏覽器預設模式 (auto)</h4>
                <ul>
                    <li>可能有輕微的平滑效果</li>
                    <li>邊緣可能稍微模糊</li>
                    <li>一般網頁瀏覽體驗</li>
                </ul>
            </div>
            <div class="guide-section">
                <h4>比較重點</h4>
                <ul>
                    <li>與Mac Preview的差異</li>
                    <li>圖片細節的清晰度</li>
                    <li>文字的可讀性</li>
                    <li>整體視覺品質</li>
                </ul>
            </div>
        </div>
    </footer>

    <script>
        // 系統信息檢測
        document.addEventListener('DOMContentLoaded', function() {
            // 顯示系統信息
            const systemInfo = document.getElementById('systemInfo');
            const screenInfo = document.getElementById('screenInfo');
            
            systemInfo.innerHTML = `
                瀏覽器: ${navigator.userAgent.split(' ').slice(-2).join(' ')}<br>
                設備像素比: ${window.devicePixelRatio}<br>
                視窗大小: ${window.innerWidth} × ${window.innerHeight}
            `;
            
            screenInfo.innerHTML = `
                螢幕解析度: ${screen.width} × ${screen.height}<br>
                可用區域: ${screen.availWidth} × ${screen.availHeight}<br>
                色彩深度: ${screen.colorDepth} bits
            `;

            // 載入圖片並顯示尺寸信息
            const images = document.querySelectorAll('.image-wrapper img');
            images.forEach(img => {
                img.onload = function() {
                    const id = this.id.replace('img-', 'size-');
                    const sizeElement = document.getElementById(id);
                    sizeElement.textContent = `原始: ${this.naturalWidth} × ${this.naturalHeight} | 顯示: ${this.width} × ${this.height}`;
                };
            });
        });

        function changeRenderMode() {
            const mode = document.getElementById('renderMode').value;
            const images = document.querySelectorAll('.image-wrapper img');
            images.forEach(img => {
                img.style.imageRendering = mode;
            });
        }

        function changeScaleMode() {
            const mode = document.getElementById('scaleMode').value;
            const images = document.querySelectorAll('.image-wrapper img');
            
            images.forEach(img => {
                img.className = ''; // 清除現有class
                img.classList.add('scale-' + mode);
            });
        }

        function toggleBorder() {
            const showBorder = document.getElementById('showBorder').checked;
            const wrappers = document.querySelectorAll('.image-wrapper');
            wrappers.forEach(wrapper => {
                wrapper.style.border = showBorder ? '2px solid #007acc' : 'none';
            });
        }

        // 初始化設定
        window.onload = function() {
            changeRenderMode();
            changeScaleMode();
            toggleBorder();
        };
    </script>
</body>
</html>
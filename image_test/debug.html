<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åœ–ç‰‡æ¨¡ç³Šå•é¡Œè¨ºæ–·</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #f5f5f5;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
        }
        
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        
        .test-section h3 {
            color: #007acc;
            margin-bottom: 15px;
        }
        
        .image-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .image-test {
            text-align: center;
            border: 2px solid #ccc;
            padding: 10px;
            border-radius: 5px;
        }
        
        .image-test h4 {
            margin-bottom: 10px;
            color: #333;
        }
        
        .image-test img {
            border: 1px solid #999;
            background: white;
        }
        
        /* æ¸¬è©¦1: é è¨­ç€è¦½å™¨æ¸²æŸ“ */
        .test1 img {
            image-rendering: auto;
        }
        
        /* æ¸¬è©¦2: åƒç´ å®Œç¾æ¸²æŸ“ */
        .test2 img {
            image-rendering: pixelated;
            image-rendering: -moz-crisp-edges;
            image-rendering: crisp-edges;
        }
        
        /* æ¸¬è©¦3: å¼·åˆ¶ç„¡ç¸®æ”¾ */
        .test3 img {
            image-rendering: pixelated;
            transform: scale(1);
            transform-origin: center;
        }
        
        /* æ¸¬è©¦4: Canvasæ¸²æŸ“ */
        .canvas-test {
            border: 1px solid #999;
            background: white;
        }
        
        .info-box {
            background: #e8f4fd;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            border-left: 4px solid #007acc;
        }
        
        .problem-analysis {
            background: #fff3cd;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            border-left: 4px solid #ffc107;
        }
        
        .solution-box {
            background: #d4edda;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            border-left: 4px solid #28a745;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ” åœ–ç‰‡æ¨¡ç³Šå•é¡Œè¨ºæ–·</h1>
        
        <div class="info-box">
            <h3>ğŸ–¥ï¸ ç³»çµ±ä¿¡æ¯</h3>
            <div id="systemInfo">æ­£åœ¨æª¢æ¸¬...</div>
        </div>
        
        <div class="problem-analysis">
            <h3>â— å•é¡Œåˆ†æ</h3>
            <p><strong>ç™¼ç¾çš„å•é¡Œ</strong>ï¼šæ‚¨çš„åœ–ç‰‡æœ‰å…©ç¨®ä¸åŒçš„è§£æåº¦ï¼š</p>
            <ul>
                <li><strong>stimuli_img.png, text_img.png</strong>: 1920Ã—1080 (Full HD)</li>
                <li><strong>tw_newsimg.png, us_newsimg.png</strong>: 3840Ã—2160 (4K)</li>
            </ul>
            <p>åœ¨Retinaé¡¯ç¤ºå™¨ä¸Šï¼Œç€è¦½å™¨å¯èƒ½æœƒå°é€™äº›ä¸åŒè§£æåº¦çš„åœ–ç‰‡é€²è¡Œä¸åŒçš„ç¸®æ”¾è™•ç†ï¼Œå°è‡´æ¨¡ç³Šã€‚</p>
        </div>
        
        <div class="test-section">
            <h3>æ¸¬è©¦1: 1920Ã—1080 åœ–ç‰‡ (stimuli_img.png)</h3>
            <div class="image-comparison">
                <div class="image-test test1">
                    <h4>ç€è¦½å™¨é è¨­æ¸²æŸ“</h4>
                    <img src="images/stimuli_img.png" width="400" height="225" alt="é è¨­æ¸²æŸ“">
                    <p><small>image-rendering: auto</small></p>
                </div>
                <div class="image-test test2">
                    <h4>åƒç´ å®Œç¾æ¸²æŸ“</h4>
                    <img src="images/stimuli_img.png" width="400" height="225" alt="åƒç´ å®Œç¾">
                    <p><small>image-rendering: pixelated</small></p>
                </div>
            </div>
        </div>
        
        <div class="test-section">
            <h3>æ¸¬è©¦2: 3840Ã—2160 åœ–ç‰‡ (tw_newsimg.png)</h3>
            <div class="image-comparison">
                <div class="image-test test1">
                    <h4>ç€è¦½å™¨é è¨­æ¸²æŸ“</h4>
                    <img src="images/tw_newsimg.png" width="400" height="225" alt="é è¨­æ¸²æŸ“">
                    <p><small>image-rendering: auto</small></p>
                </div>
                <div class="image-test test2">
                    <h4>åƒç´ å®Œç¾æ¸²æŸ“</h4>
                    <img src="images/tw_newsimg.png" width="400" height="225" alt="åƒç´ å®Œç¾">
                    <p><small>image-rendering: pixelated</small></p>
                </div>
            </div>
        </div>
        
        <div class="test-section">
            <h3>æ¸¬è©¦3: Canvas åŸç”Ÿæ¸²æŸ“</h3>
            <div class="image-test">
                <h4>ä½¿ç”¨Canvas APIç›´æ¥æ¸²æŸ“</h4>
                <canvas id="canvasTest" class="canvas-test" width="400" height="225"></canvas>
                <p><small>Canvas 2D API æ¸²æŸ“ï¼Œç„¡ç€è¦½å™¨å¹²æ“¾</small></p>
            </div>
        </div>
        
        <div class="test-section">
            <h3>æ¸¬è©¦4: åŸå§‹å°ºå¯¸é¡¯ç¤º</h3>
            <div class="image-test">
                <h4>stimuli_img.png åŸå§‹å°ºå¯¸ (1920Ã—1080)</h4>
                <div style="overflow: auto; max-height: 400px; border: 1px solid #ccc;">
                    <img src="images/stimuli_img.png" style="image-rendering: pixelated;" alt="åŸå§‹å°ºå¯¸">
                </div>
                <p><small>å®Œå…¨åŸå§‹å°ºå¯¸ï¼Œç„¡ä»»ä½•ç¸®æ”¾</small></p>
            </div>
        </div>
        
        <div class="solution-box">
            <h3>ğŸ’¡ è§£æ±ºæ–¹æ¡ˆå»ºè­°</h3>
            <ol>
                <li><strong>çµ±ä¸€åœ–ç‰‡è§£æåº¦</strong>ï¼šå°‡æ‰€æœ‰åœ–ç‰‡çµ±ä¸€ç‚ºç›¸åŒè§£æåº¦</li>
                <li><strong>ä½¿ç”¨Canvasæ¸²æŸ“</strong>ï¼šç¹éç€è¦½å™¨çš„åœ–ç‰‡ç¸®æ”¾æ©Ÿåˆ¶</li>
                <li><strong>èª¿æ•´CSSè¨­å®š</strong>ï¼šä½¿ç”¨æ­£ç¢ºçš„image-renderingå±¬æ€§</li>
                <li><strong>è€ƒæ…®SVGæ ¼å¼</strong>ï¼šå°æ–¼æŸäº›åœ–ç‰‡é¡å‹å¯èƒ½æ›´å¥½</li>
            </ol>
        </div>
        
        <div class="test-section">
            <h3>ğŸ”¬ è©³ç´°åˆ†æçµæœ</h3>
            <div id="analysisResults">
                <p>æ­£åœ¨åˆ†æåœ–ç‰‡æ¸²æŸ“å“è³ª...</p>
            </div>
        </div>
    </div>
    
    <script>
        // ç³»çµ±ä¿¡æ¯æª¢æ¸¬
        document.addEventListener('DOMContentLoaded', function() {
            const systemInfo = document.getElementById('systemInfo');
            
            systemInfo.innerHTML = `
                <strong>ç€è¦½å™¨</strong>: ${navigator.userAgent.split(' ').slice(-2).join(' ')}<br>
                <strong>è¨­å‚™åƒç´ æ¯”</strong>: ${window.devicePixelRatio}<br>
                <strong>è¦–çª—å¤§å°</strong>: ${window.innerWidth} Ã— ${window.innerHeight}<br>
                <strong>è¢å¹•è§£æåº¦</strong>: ${screen.width} Ã— ${screen.height}<br>
                <strong>å¯ç”¨å€åŸŸ</strong>: ${screen.availWidth} Ã— ${screen.availHeight}<br>
                <strong>è‰²å½©æ·±åº¦</strong>: ${screen.colorDepth} bits
            `;
            
            // Canvasæ¸¬è©¦
            const canvas = document.getElementById('canvasTest');
            const ctx = canvas.getContext('2d');
            
            // é—œé–‰åœ–ç‰‡å¹³æ»‘
            ctx.imageSmoothingEnabled = false;
            ctx.webkitImageSmoothingEnabled = false;
            ctx.mozImageSmoothingEnabled = false;
            ctx.msImageSmoothingEnabled = false;
            
            const img = new Image();
            img.onload = function() {
                // å°‡åœ–ç‰‡ç¹ªè£½åˆ°canvasï¼Œå¼·åˆ¶ç„¡å¹³æ»‘ç¸®æ”¾
                ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
                
                console.log('Canvasæ¸²æŸ“å®Œæˆ');
            };
            img.src = 'images/stimuli_img.png';
            
            // åˆ†æçµæœ
            setTimeout(() => {
                analyzeRendering();
            }, 2000);
        });
        
        function analyzeRendering() {
            const analysisResults = document.getElementById('analysisResults');
            const devicePixelRatio = window.devicePixelRatio;
            
            let analysis = '<h4>ğŸ” æ¸²æŸ“åˆ†æçµæœï¼š</h4>';
            
            if (devicePixelRatio > 1) {
                analysis += `
                    <p><strong>âš ï¸ é«˜DPIé¡¯ç¤ºå™¨æª¢æ¸¬åˆ°</strong></p>
                    <ul>
                        <li>æ‚¨çš„è¨­å‚™åƒç´ æ¯”ç‚º ${devicePixelRatio}</li>
                        <li>é€™æ„å‘³è‘—æ¯å€‹CSSåƒç´ å¯¦éš›ç”± ${devicePixelRatio}Â² = ${Math.pow(devicePixelRatio, 2)} å€‹ç‰©ç†åƒç´ çµ„æˆ</li>
                        <li>ç€è¦½å™¨æœƒè‡ªå‹•å°åœ–ç‰‡é€²è¡Œå…§æ’ç¸®æ”¾ï¼Œé€™å¯èƒ½å°è‡´æ¨¡ç³Š</li>
                    </ul>
                `;
            }
            
            analysis += `
                <p><strong>ğŸ”§ æ¨è–¦è§£æ±ºæ–¹æ¡ˆï¼š</strong></p>
                <ol>
                    <li><strong>ä½¿ç”¨é«˜è§£æåº¦åœ–ç‰‡</strong>ï¼šè£½ä½œ ${devicePixelRatio}x ç‰ˆæœ¬çš„åœ–ç‰‡</li>
                    <li><strong>Canvasæ¸²æŸ“</strong>ï¼šä½¿ç”¨ä¸Šé¢çš„Canvasæ–¹æ³•ï¼Œé—œé–‰åœ–ç‰‡å¹³æ»‘</li>
                    <li><strong>CSSè¨­å®š</strong>ï¼šä½¿ç”¨ image-rendering: pixelated</li>
                    <li><strong>å›ºå®šå°ºå¯¸</strong>ï¼šé¿å…ä»»ä½•CSSç¸®æ”¾</li>
                </ol>
                
                <p><strong>ğŸ“Š æ¸¬è©¦å»ºè­°ï¼š</strong></p>
                <ul>
                    <li>æ¯”è¼ƒä¸Šé¢ä¸åŒæ¸²æŸ“æ–¹å¼çš„æ¸…æ™°åº¦</li>
                    <li>æª¢æŸ¥Canvasç‰ˆæœ¬æ˜¯å¦æ›´æ¸…æ™°</li>
                    <li>è§€å¯ŸåŸå§‹å°ºå¯¸ç‰ˆæœ¬çš„å“è³ª</li>
                </ul>
            `;
            
            analysisResults.innerHTML = analysis;
        }
    </script>
</body>
</html>